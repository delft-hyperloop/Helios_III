{
  "version": 3,
  "sources": ["../../react-router-dom/server.mjs"],
  "sourcesContent": ["import * as React from 'react';\nimport { Action, UNSAFE_invariant, isRouteErrorResponse, createStaticHandler as createStaticHandler$1, UNSAFE_convertRoutesToDataRoutes, IDLE_NAVIGATION, IDLE_FETCHER, IDLE_BLOCKER } from '@remix-run/router';\nimport { UNSAFE_useRoutesImpl, UNSAFE_mapRouteProperties } from 'react-router';\nimport { parsePath, Router, UNSAFE_DataRouterContext, UNSAFE_DataRouterStateContext, UNSAFE_FetchersContext, UNSAFE_ViewTransitionContext, createPath } from 'react-router-dom';\n\n/**\n * A `<Router>` that may not navigate to any other location. This is useful\n * on the server where there is no stateful UI.\n */\nfunction StaticRouter({\n  basename,\n  children,\n  location: locationProp = \"/\",\n  future\n}) {\n  if (typeof locationProp === \"string\") {\n    locationProp = parsePath(locationProp);\n  }\n  let action = Action.Pop;\n  let location = {\n    pathname: locationProp.pathname || \"/\",\n    search: locationProp.search || \"\",\n    hash: locationProp.hash || \"\",\n    state: locationProp.state || null,\n    key: locationProp.key || \"default\"\n  };\n  let staticNavigator = getStatelessNavigator();\n  return /*#__PURE__*/React.createElement(Router, {\n    basename: basename,\n    children: children,\n    location: location,\n    navigationType: action,\n    navigator: staticNavigator,\n    future: future,\n    static: true\n  });\n}\n/**\n * A Data Router that may not navigate to any other location. This is useful\n * on the server where there is no stateful UI.\n */\nfunction StaticRouterProvider({\n  context,\n  router,\n  hydrate = true,\n  nonce\n}) {\n  !(router && context) ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"You must provide `router` and `context` to <StaticRouterProvider>\") : UNSAFE_invariant(false) : void 0;\n  let dataRouterContext = {\n    router,\n    navigator: getStatelessNavigator(),\n    static: true,\n    staticContext: context,\n    basename: context.basename || \"/\"\n  };\n  let fetchersContext = new Map();\n  let hydrateScript = \"\";\n  if (hydrate !== false) {\n    let data = {\n      loaderData: context.loaderData,\n      actionData: context.actionData,\n      errors: serializeErrors(context.errors)\n    };\n    // Use JSON.parse here instead of embedding a raw JS object here to speed\n    // up parsing on the client.  Dual-stringify is needed to ensure all quotes\n    // are properly escaped in the resulting string.  See:\n    //   https://v8.dev/blog/cost-of-javascript-2019#json\n    let json = htmlEscape(JSON.stringify(JSON.stringify(data)));\n    hydrateScript = `window.__staticRouterHydrationData = JSON.parse(${json});`;\n  }\n  let {\n    state\n  } = dataRouterContext.router;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(UNSAFE_DataRouterContext.Provider, {\n    value: dataRouterContext\n  }, /*#__PURE__*/React.createElement(UNSAFE_DataRouterStateContext.Provider, {\n    value: state\n  }, /*#__PURE__*/React.createElement(UNSAFE_FetchersContext.Provider, {\n    value: fetchersContext\n  }, /*#__PURE__*/React.createElement(UNSAFE_ViewTransitionContext.Provider, {\n    value: {\n      isTransitioning: false\n    }\n  }, /*#__PURE__*/React.createElement(Router, {\n    basename: dataRouterContext.basename,\n    location: state.location,\n    navigationType: state.historyAction,\n    navigator: dataRouterContext.navigator,\n    static: dataRouterContext.static,\n    future: {\n      v7_relativeSplatPath: router.future.v7_relativeSplatPath\n    }\n  }, /*#__PURE__*/React.createElement(DataRoutes, {\n    routes: router.routes,\n    future: router.future,\n    state: state\n  })))))), hydrateScript ? /*#__PURE__*/React.createElement(\"script\", {\n    suppressHydrationWarning: true,\n    nonce: nonce,\n    dangerouslySetInnerHTML: {\n      __html: hydrateScript\n    }\n  }) : null);\n}\nfunction DataRoutes({\n  routes,\n  future,\n  state\n}) {\n  return UNSAFE_useRoutesImpl(routes, undefined, state, future);\n}\nfunction serializeErrors(errors) {\n  if (!errors) return null;\n  let entries = Object.entries(errors);\n  let serialized = {};\n  for (let [key, val] of entries) {\n    // Hey you!  If you change this, please change the corresponding logic in\n    // deserializeErrors in react-router-dom/index.tsx :)\n    if (isRouteErrorResponse(val)) {\n      serialized[key] = {\n        ...val,\n        __type: \"RouteErrorResponse\"\n      };\n    } else if (val instanceof Error) {\n      // Do not serialize stack traces from SSR for security reasons\n      serialized[key] = {\n        message: val.message,\n        __type: \"Error\",\n        // If this is a subclass (i.e., ReferenceError), send up the type so we\n        // can re-create the same type during hydration.\n        ...(val.name !== \"Error\" ? {\n          __subType: val.name\n        } : {})\n      };\n    } else {\n      serialized[key] = val;\n    }\n  }\n  return serialized;\n}\nfunction getStatelessNavigator() {\n  return {\n    createHref,\n    encodeLocation,\n    push(to) {\n      throw new Error(`You cannot use navigator.push() on the server because it is a stateless ` + `environment. This error was probably triggered when you did a ` + `\\`navigate(${JSON.stringify(to)})\\` somewhere in your app.`);\n    },\n    replace(to) {\n      throw new Error(`You cannot use navigator.replace() on the server because it is a stateless ` + `environment. This error was probably triggered when you did a ` + `\\`navigate(${JSON.stringify(to)}, { replace: true })\\` somewhere ` + `in your app.`);\n    },\n    go(delta) {\n      throw new Error(`You cannot use navigator.go() on the server because it is a stateless ` + `environment. This error was probably triggered when you did a ` + `\\`navigate(${delta})\\` somewhere in your app.`);\n    },\n    back() {\n      throw new Error(`You cannot use navigator.back() on the server because it is a stateless ` + `environment.`);\n    },\n    forward() {\n      throw new Error(`You cannot use navigator.forward() on the server because it is a stateless ` + `environment.`);\n    }\n  };\n}\nfunction createStaticHandler(routes, opts) {\n  return createStaticHandler$1(routes, {\n    ...opts,\n    mapRouteProperties: UNSAFE_mapRouteProperties\n  });\n}\nfunction createStaticRouter(routes, context, opts = {}) {\n  let manifest = {};\n  let dataRoutes = UNSAFE_convertRoutesToDataRoutes(routes, UNSAFE_mapRouteProperties, undefined, manifest);\n\n  // Because our context matches may be from a framework-agnostic set of\n  // routes passed to createStaticHandler(), we update them here with our\n  // newly created/enhanced data routes\n  let matches = context.matches.map(match => {\n    let route = manifest[match.route.id] || match.route;\n    return {\n      ...match,\n      route\n    };\n  });\n  let msg = method => `You cannot use router.${method}() on the server because it is a stateless environment`;\n  return {\n    get basename() {\n      return context.basename;\n    },\n    get future() {\n      return {\n        v7_fetcherPersist: false,\n        v7_normalizeFormMethod: false,\n        v7_partialHydration: opts.future?.v7_partialHydration === true,\n        v7_prependBasename: false,\n        v7_relativeSplatPath: opts.future?.v7_relativeSplatPath === true\n      };\n    },\n    get state() {\n      return {\n        historyAction: Action.Pop,\n        location: context.location,\n        matches,\n        loaderData: context.loaderData,\n        actionData: context.actionData,\n        errors: context.errors,\n        initialized: true,\n        navigation: IDLE_NAVIGATION,\n        restoreScrollPosition: null,\n        preventScrollReset: false,\n        revalidation: \"idle\",\n        fetchers: new Map(),\n        blockers: new Map()\n      };\n    },\n    get routes() {\n      return dataRoutes;\n    },\n    get window() {\n      return undefined;\n    },\n    initialize() {\n      throw msg(\"initialize\");\n    },\n    subscribe() {\n      throw msg(\"subscribe\");\n    },\n    enableScrollRestoration() {\n      throw msg(\"enableScrollRestoration\");\n    },\n    navigate() {\n      throw msg(\"navigate\");\n    },\n    fetch() {\n      throw msg(\"fetch\");\n    },\n    revalidate() {\n      throw msg(\"revalidate\");\n    },\n    createHref,\n    encodeLocation,\n    getFetcher() {\n      return IDLE_FETCHER;\n    },\n    deleteFetcher() {\n      throw msg(\"deleteFetcher\");\n    },\n    dispose() {\n      throw msg(\"dispose\");\n    },\n    getBlocker() {\n      return IDLE_BLOCKER;\n    },\n    deleteBlocker() {\n      throw msg(\"deleteBlocker\");\n    },\n    _internalFetchControllers: new Map(),\n    _internalActiveDeferreds: new Map(),\n    _internalSetRoutes() {\n      throw msg(\"_internalSetRoutes\");\n    }\n  };\n}\nfunction createHref(to) {\n  return typeof to === \"string\" ? to : createPath(to);\n}\nfunction encodeLocation(to) {\n  let href = typeof to === \"string\" ? to : createPath(to);\n  // Treating this as a full URL will strip any trailing spaces so we need to\n  // pre-encode them since they might be part of a matching splat param from\n  // an ancestor route\n  href = href.replace(/ $/, \"%20\");\n  let encoded = ABSOLUTE_URL_REGEX.test(href) ? new URL(href) : new URL(href, \"http://localhost\");\n  return {\n    pathname: encoded.pathname,\n    search: encoded.search,\n    hash: encoded.hash\n  };\n}\nconst ABSOLUTE_URL_REGEX = /^(?:[a-z][a-z0-9+.-]*:|\\/\\/)/i;\n\n// This utility is based on https://github.com/zertosh/htmlescape\n// License: https://github.com/zertosh/htmlescape/blob/0527ca7156a524d256101bb310a9f970f63078ad/LICENSE\nconst ESCAPE_LOOKUP = {\n  \"&\": \"\\\\u0026\",\n  \">\": \"\\\\u003e\",\n  \"<\": \"\\\\u003c\",\n  \"\\u2028\": \"\\\\u2028\",\n  \"\\u2029\": \"\\\\u2029\"\n};\nconst ESCAPE_REGEX = /[&><\\u2028\\u2029]/g;\nfunction htmlEscape(str) {\n  return str.replace(ESCAPE_REGEX, match => ESCAPE_LOOKUP[match]);\n}\n\nexport { StaticRouter, StaticRouterProvider, createStaticHandler, createStaticRouter };\n"],
  "mappings": "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",
  "names": ["createStaticHandler"]
}
